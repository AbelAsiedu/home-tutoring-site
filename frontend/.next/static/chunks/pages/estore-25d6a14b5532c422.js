(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{7423:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/estore",function(){return s(9668)}])},1842:function(e,t,s){"use strict";async function safeFetchJson(e,t){try{let s=await fetch(e,Object.assign({credentials:"include"},t||{}));if(!s.ok){let e=await s.text().catch(()=>null),t=Error("HTTP "+s.status+" "+s.statusText);throw t.status=s.status,t.body=e,t}return await s.json()}catch(t){throw console.error("API fetch error",e,t),t}}s.d(t,{S:function(){return swrFetcher}});let swrFetcher=e=>safeFetchJson(e)},9668:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return o},default:function(){return EStore}});var i=s(5893),n=s(9734),a=s(1664),c=s.n(a),r=s(3454),l=s(9044),d=s(1842),o=!0;function EStore(e){let{initialProducts:t}=e,{data:s,error:a}=(0,n.ZP)("/api/products",d.S,{fallbackData:t});async function addToCart(e){let t=new URLSearchParams({id:e});await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),alert("Added to cart")}return(0,i.jsxs)("div",{children:[(0,i.jsx)(r.Z,{}),(0,i.jsxs)("main",{className:"container",children:[(0,i.jsxs)("div",{className:"glass",style:{padding:20,marginTop:18},children:[(0,i.jsx)("h1",{children:"E-Store â€” Books & Resources"}),(0,i.jsx)("p",{className:"muted",children:"Shop course books, revision guides and digital resources. Click a product to view details and purchase."})]}),(0,i.jsx)("section",{style:{marginTop:18},children:s&&s.length?(0,i.jsx)("div",{className:"product-grid",children:s.map(e=>(0,i.jsxs)("div",{className:"product glass",style:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)("img",{src:e.image_path||e.image||"/images/book-placeholder.svg",alt:e.title,style:{width:"100%",height:180,objectFit:"cover"}}),(0,i.jsxs)("div",{style:{padding:"12px",flex:1,display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[(0,i.jsx)("div",{style:{fontWeight:700},children:e.title}),(0,i.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:["GHS ",e.price]})]}),(0,i.jsx)("div",{className:"muted",style:{marginTop:8,flex:1},children:e.description||"No description available."}),(0,i.jsxs)("div",{style:{marginTop:12,display:"flex",gap:10},children:[(0,i.jsx)(c(),{href:"/product/".concat(e.id),className:"btn",children:"View"}),(0,i.jsx)("button",{onClick:()=>addToCart(e.id),className:"btn",children:"Add to cart"})]})]})]},e.id))}):a?(0,i.jsx)("div",{className:"muted",children:"Could not load products (backend unreachable)"}):(0,i.jsx)("p",{children:"Loading..."})})]}),(0,i.jsx)(l.Z,{})]})}}},function(e){e.O(0,[664,133,997,774,888,179],function(){return e(e.s=7423)}),_N_E=e.O()}]);