(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{1548:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return s(4125)}])},1842:function(e,t,s){"use strict";async function safeFetchJson(e,t){try{let s=await fetch(e,Object.assign({credentials:"include"},t||{}));if(!s.ok){let e=await s.text().catch(()=>null),t=Error("HTTP "+s.status+" "+s.statusText);throw t.status=s.status,t.body=e,t}return await s.json()}catch(t){throw console.error("API fetch error",e,t),t}}s.d(t,{S:function(){return swrFetcher}});let swrFetcher=e=>safeFetchJson(e)},4125:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ProductPage}});var a=s(5893),i=s(3454),n=s(9044),r=s(1163),d=s(9734),l=s(1842);function ProductPage(){let e=(0,r.useRouter)(),{id:t}=e.query,{data:s,error:c}=(0,d.ZP)(t?"/api/products":null,l.S);if(!t)return null;if(c)return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Z,{}),(0,a.jsx)("main",{className:"container",children:(0,a.jsx)("div",{className:"glass",style:{padding:20,marginTop:18},children:"Could not load product details."})}),(0,a.jsx)(n.Z,{})]});let o=s?s.find(e=>e.id===t):null;async function addToCart(){let e=new URLSearchParams({id:t,quantity:u});await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),alert("Added to cart")}let[u,h]=useState(1);return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Z,{}),(0,a.jsxs)("main",{className:"container",children:[(0,a.jsx)("div",{className:"glass",style:{padding:20,marginTop:18},children:o?(0,a.jsxs)("div",{style:{display:"flex",gap:20,alignItems:"flex-start"},children:[(0,a.jsx)("img",{src:o.image||"/placeholder.jpg",alt:o.title,style:{width:240}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:o.title}),(0,a.jsxs)("div",{className:"muted",children:["GHS ",o.price]}),(0,a.jsx)("p",{style:{marginTop:12},children:o.description}),(0,a.jsxs)("div",{style:{marginTop:18,display:"flex",gap:12,alignItems:"center"},children:[(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:["Qty",(0,a.jsx)("input",{type:"number",min:"1",value:u,onChange:e=>h(Math.max(1,parseInt(e.target.value||1))),style:{width:72,padding:6}})]}),(0,a.jsx)("button",{className:"btn",onClick:addToCart,children:"Add to cart"})]})]})]}):(0,a.jsx)("p",{children:"Loading..."})}),s&&o&&(0,a.jsxs)("section",{style:{marginTop:18},children:[(0,a.jsx)("h3",{children:"Related resources"}),(0,a.jsx)("div",{className:"product-grid",children:s.filter(e=>e.id!==t).slice(0,4).map(e=>(0,a.jsxs)("div",{className:"product glass",children:[(0,a.jsx)("img",{src:e.image_path||e.image||"/images/book-placeholder.svg",alt:e.title}),(0,a.jsx)("div",{className:"title",children:e.title}),(0,a.jsxs)("div",{className:"muted",children:["GHS ",e.price]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:8},children:[(0,a.jsx)("a",{href:"/product/".concat(e.id),className:"btn",children:"View"}),(0,a.jsx)("button",{className:"btn",onClick:async()=>{let t=new URLSearchParams({id:e.id,quantity:1});await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),alert("Added")},children:"Add"})]})]},e.id))})]})]}),(0,a.jsx)(n.Z,{})]})}},1163:function(e,t,s){e.exports=s(9974)}},function(e){e.O(0,[664,133,997,774,888,179],function(){return e(e.s=1548)}),_N_E=e.O()}]);