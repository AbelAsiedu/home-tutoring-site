(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(7644)}])},8910:function(n,e,t){"use strict";function toUrlEncoded(n){return Object.keys(n).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(n[e]||"")).join("&")}async function postUrlEncoded(n,e){return fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:toUrlEncoded(e),credentials:"include"})}function validateEmail(n){return/\S+@\S+\.\S+/.test(n)}function validateRequired(n){return"string"==typeof n?n.trim().length>0:!!n}t.d(e,{QK:function(){return validateRequired},RR:function(){return postUrlEncoded},oH:function(){return validateEmail}})},7644:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Login}});var i=t(5893),r=t(3454),s=t(9044),o=t(7294),a=t(1163),u=t(8910);function Login(){let[n,e]=(0,o.useState)(null),t=(0,a.useRouter)();async function submit(n){n.preventDefault();let i=new FormData(n.target),r={username:i.get("username"),password:i.get("password")};await (0,u.RR)("/login",r);let s=await fetch("/api/session",{credentials:"include"}).then(n=>n.json());s&&s.user?t.push("/account"):e("Invalid credentials")}return(0,i.jsxs)("div",{children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)("main",{className:"container",children:(0,i.jsxs)("div",{className:"glass",style:{padding:20,marginTop:18,maxWidth:600},children:[(0,i.jsx)("h1",{children:"Login"}),n&&(0,i.jsx)("div",{style:{color:"crimson"},children:n}),(0,i.jsxs)("form",{onSubmit:submit,style:{display:"grid",gap:10,marginTop:12},children:[(0,i.jsx)("input",{name:"username",placeholder:"Username or email",required:!0}),(0,i.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0}),(0,i.jsx)("button",{className:"btn",type:"submit",children:"Log in"})]})]})}),(0,i.jsx)(s.Z,{})]})}},1163:function(n,e,t){n.exports=t(9974)}},function(n){n.O(0,[664,997,774,888,179],function(){return n(n.s=6429)}),_N_E=n.O()}]);