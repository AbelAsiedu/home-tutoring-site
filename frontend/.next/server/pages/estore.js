"use strict";(()=>{var e={};e.id=286,e.ids=[286,888,660],e.modules={6715:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>m,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>g,getStaticProps:()=>u,reportWebVitals:()=>v,routeModule:()=>P,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>j});var r=s(7093),i=s(5244),l=s(1323),o=s(9209),c=s.n(o),d=s(9597),n=s(9668),h=e([n]);n=(h.then?(await h)():h)[0];let p=(0,l.l)(n,"default"),u=(0,l.l)(n,"getStaticProps"),g=(0,l.l)(n,"getStaticPaths"),x=(0,l.l)(n,"getServerSideProps"),m=(0,l.l)(n,"config"),v=(0,l.l)(n,"reportWebVitals"),j=(0,l.l)(n,"unstable_getStaticProps"),f=(0,l.l)(n,"unstable_getStaticPaths"),S=(0,l.l)(n,"unstable_getStaticParams"),y=(0,l.l)(n,"unstable_getServerProps"),w=(0,l.l)(n,"unstable_getServerSideProps"),P=new r.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/estore",pathname:"/estore",bundlePath:"",filename:""},components:{App:d.default,Document:c()},userland:n});a()}catch(e){a(e)}})},1842:(e,t,s)=>{async function safeFetchJson(e,t){try{let s=await fetch(e,Object.assign({credentials:"include"},t||{}));if(!s.ok){let e=await s.text().catch(()=>null),t=Error("HTTP "+s.status+" "+s.statusText);throw t.status=s.status,t.body=e,t}return await s.json()}catch(t){throw console.error("API fetch error",e,t),t}}s.d(t,{S:()=>swrFetcher});let swrFetcher=e=>safeFetchJson(e)},9668:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>EStore,getServerSideProps:()=>getServerSideProps});var r=s(997),i=s(5941),l=s(1664),o=s.n(l),c=s(3454),d=s(9044),n=s(1842),h=e([i]);function EStore({initialProducts:e}){let{data:t,error:s}=(0,i.default)("/api/products",n.S,{fallbackData:e});async function addToCart(e){let t=new URLSearchParams({id:e});await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),alert("Added to cart")}return(0,r.jsxs)("div",{children:[r.jsx(c.Z,{}),r.jsx("section",{className:"hero-slideshow",style:{height:220},children:(0,r.jsxs)("div",{className:"hero-slideshow-inner",style:{position:"relative",height:"100%"},children:[r.jsx("div",{className:"slide",children:r.jsx("img",{loading:"lazy",src:"/images/slide2.svg",alt:"slide-1",style:{width:"100%",height:"100%",objectFit:"cover"}})}),r.jsx("div",{className:"slide",children:r.jsx("img",{loading:"lazy",src:"/images/hero-illustration.svg",alt:"slide-2",style:{width:"100%",height:"100%",objectFit:"cover"}})}),r.jsx("div",{className:"slide",children:r.jsx("img",{loading:"lazy",src:"/images/slide2.svg",alt:"slide-3",style:{width:"100%",height:"100%",objectFit:"cover"}})})]})}),(0,r.jsxs)("main",{className:"container",children:[(0,r.jsxs)("div",{className:"glass",style:{padding:20,marginTop:18},children:[r.jsx("h1",{children:"E-Store â€” Books & Resources"}),r.jsx("p",{className:"muted",children:"Shop course books, revision guides and digital resources. Click a product to view details and purchase."})]}),r.jsx("section",{style:{marginTop:18},children:t&&t.length?r.jsx("div",{className:"product-grid",children:t.map(e=>(0,r.jsxs)("div",{className:"product glass",style:{display:"flex",flexDirection:"column"},children:[r.jsx("img",{src:e.image_path||e.image||"/images/book-placeholder.svg",alt:e.title,style:{width:"100%",height:180,objectFit:"cover"}}),(0,r.jsxs)("div",{style:{padding:"12px",flex:1,display:"flex",flexDirection:"column"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[r.jsx("div",{style:{fontWeight:700},children:e.title}),(0,r.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:["GHS ",e.price]})]}),r.jsx("div",{className:"muted",style:{marginTop:8,flex:1},children:e.description||"No description available."}),(0,r.jsxs)("div",{style:{marginTop:12,display:"flex",gap:10},children:[r.jsx(o(),{href:`/product/${e.id}`,className:"btn",children:"View"}),r.jsx("button",{onClick:()=>addToCart(e.id),className:"btn",children:"Add to cart"})]})]})]},e.id))}):s?r.jsx("div",{className:"muted",children:"The Modern Pedagogues"}):r.jsx("p",{children:"Loading..."})})]}),r.jsx(d.Z,{})]})}async function getServerSideProps(e){try{let{req:t}=e,s=t.headers["x-forwarded-proto"]||t.protocol||"http",a=t.headers["x-forwarded-host"]||t.headers.host||`localhost:${process.env.PORT||3001}`,r=`${s}://${a}`,i=await fetch(`${r}/api/products`),l=await i.json();return{props:{initialProducts:l}}}catch(e){try{let e=process.env.PORT||3001,t=await fetch(`http://localhost:${e}/api/products`),s=await t.json();return{props:{initialProducts:s}}}catch(e){return{props:{initialProducts:[]}}}}}i=(h.then?(await h)():h)[0],a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},5941:e=>{e.exports=import("swr")},1017:e=>{e.exports=require("path")},7310:e=>{e.exports=require("url")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[209,656,664,597,997],()=>__webpack_exec__(6715));module.exports=s})();